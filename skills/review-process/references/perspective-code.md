# コードレビュー観点

ソースコードをレビューする際に確認すべき観点の一覧。全項目を網羅的にチェックすること。

## 1. 設計書との整合性

| # | チェック項目 |
|:--|:--|
| 1.1 | 設計書に記載された処理ロジックが正確に実装されているか |
| 1.2 | 設計書に記載されたインターフェース（入出力）と実装が一致しているか |
| 1.3 | 設計書に記載されたエラーハンドリングが実装されているか |
| 1.4 | 設計書に未記載の独自実装が混入していないか |

## 2. 設計原則

| # | チェック項目 |
|:--|:--|
| 2.1 | **Single Responsibility**: クラス・関数が単一の責務のみを持っているか |
| 2.2 | **Open/Closed**: 拡張に対して開き、修正に対して閉じた設計になっているか |
| 2.3 | **DRY**: 重複コードが排除されているか |
| 2.4 | **KISS**: 不必要に複雑な実装になっていないか |
| 2.5 | 関数・メソッドの行数が適切か（過度に長い関数はないか） |

## 3. エラーハンドリング

| # | チェック項目 |
|:--|:--|
| 3.1 | 例外が適切にキャッチされ、握りつぶされていないか |
| 3.2 | エラー情報が適切にロギングされているか |
| 3.3 | ユーザー向けエラーメッセージに内部情報が漏洩していないか |
| 3.4 | リソース（ファイル、DB接続等）が例外発生時にも確実に解放されるか |
| 3.5 | NULL/undefined チェックが適切に行われているか |

## 4. セキュリティ

| # | チェック項目 |
|:--|:--|
| 4.1 | SQLインジェクション対策（プリペアドステートメント等）が施されているか |
| 4.2 | XSS対策（入力サニタイズ、出力エスケープ）が施されているか |
| 4.3 | 認証・認可チェックが適切に実装されているか |
| 4.4 | 機密情報（パスワード、APIキー）がハードコーディングされていないか |
| 4.5 | 入力値のバリデーションが適切に行われているか |

## 5. パフォーマンス

| # | チェック項目 |
|:--|:--|
| 5.1 | N+1クエリ問題がないか |
| 5.2 | 不必要なループ内DB/APIアクセスがないか |
| 5.3 | 大量データ処理時のメモリ効率が考慮されているか |
| 5.4 | 適切なインデックスの利用を前提としたクエリになっているか |
| 5.5 | 不必要な同期処理・ブロッキング処理がないか |

## 6. テスタビリティ

| # | チェック項目 |
|:--|:--|
| 6.1 | 依存関係が注入可能（DI）になっているか |
| 6.2 | 外部依存（DB、API、ファイルシステム）がモック可能な構造か |
| 6.3 | 純粋関数として切り出せるロジックが適切に分離されているか |
| 6.4 | テストに必要な内部状態へのアクセスが可能か |

## 7. 可読性・保守性

| # | チェック項目 |
|:--|:--|
| 7.1 | 変数名・関数名・クラス名が意図を明確に表しているか |
| 7.2 | マジックナンバー・マジックストリングが定数化されているか |
| 7.3 | コメントが「なぜ」を説明しているか（「何を」の繰り返しになっていないか） |
| 7.4 | コーディング規約・リンティングルールに準拠しているか |
| 7.5 | 不要なコメントアウト・デッドコードが残っていないか |

## 8. 型安全性

| # | チェック項目 |
|:--|:--|
| 8.1 | any 型の使用が避けられているか（TypeScript等） |
| 8.2 | 型アサーション（as キャスト）が最小限に抑えられているか |
| 8.3 | ジェネリクスが適切に活用されているか |
| 8.4 | 戻り値の型が明示されているか |
